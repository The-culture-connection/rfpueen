{% extends "base.html" %}

{% block title %}Profile â€¢ RFP Queen{% endblock %}

{% block content %}
  <section class="page-heading">
    <h1>Organization profile</h1>
    <p>The algorithm uses this information plus your Firebase profile to refine opportunity matches and win rates.</p>
  </section>

  <section class="card form-card">
    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.non_field_errors }}

      {% for field in form %}
        <div class="form-field">
          <label for="{{ field.id_for_label }}">{{ field.label }}{% if field.field.required %}<span class="required">*</span>{% endif %}</label>
          {{ field }}
          {% if field.help_text %}
            <small class="help-text">{{ field.help_text }}</small>
          {% endif %}
          {{ field.errors }}
        </div>
      {% endfor %}

      <button type="submit" class="btn primary">Save profile</button>
    </form>
  </section>

  {% if active_profile and active_profile.firebase_uid %}
    <section class="card meta-card">
      <h2>Connected Firebase profile</h2>
      <dl>
        <div><dt>Firebase UID</dt><dd>{{ active_profile.firebase_uid }}</dd></div>
        {% if active_profile.focus_areas %}
          <div><dt>Focus areas</dt><dd>{{ active_profile.focus_areas|join:", " }}</dd></div>
        {% endif %}
        {% if active_profile.target_beneficiaries %}
          <div><dt>Beneficiaries</dt><dd>{{ active_profile.target_beneficiaries|join:", " }}</dd></div>
        {% endif %}
      </dl>
    </section>
  {% endif %}
{% endblock %}
